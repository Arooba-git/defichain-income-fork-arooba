<div
  class='flex flex-col lg:flex-row lg:flex-auto'
>
  <!-- [ngClass]="{ 'grid-rows-2 lg:grid-cols""-2': !hideHoldings }" -->
  <div class='mb-4 lg:mb-0 order-2 lg:order-1 flex-1' *ngIf='!hideHoldings'>
    <h2 class='text-lg dark:text-gray-100'>{{ 'value.dist' | translate }}</h2>
    <br>
    <br>
    <div class='w-full max-w-lg mx-auto' *ngIf='chartOptions3 && chartOptions3.series.length > 0'>
      <apx-chart
        *ngIf='chartOptions3 && chartOptions3.series.length > 0'
        [series]='chartOptions3?.series'
        [chart]='chartOptions3?.chart'
        [labels]='chartOptions3?.labels'
        [colors]='chartOptions3?.colors'
        [fill]='chartOptions3?.fill'
        [dataLabels]='chartOptions3?.dataLabels'
        [responsive]='chartOptions3?.responsive'
        [theme]='{ mode: getTheme() }'
      ></apx-chart>
    </div>
    <div class='w-full max-w-lg mx-auto mb-2' *ngIf='chartOptions && chartOptions.series.length > 0'>
      <apx-chart *ngIf='chartOptions && chartOptions.series.length > 0'
                 class='w-full'
                 [series]='chartOptions?.series'
                 [chart]='chartOptions?.chart'
                 [labels]='chartOptions?.labels'
                 [colors]='chartOptions?.colors'
                 [fill]='chartOptions?.fill'
                 [dataLabels]='chartOptions?.dataLabels'
                 [responsive]='chartOptions?.responsive'
                 [theme]='{ mode: getTheme() }'
      ></apx-chart>
    </div>
  </div>
  <div class='order-1 lg:order-2 flex-1'>
    <div>

      <h3 class='text-lg font-semibold mt-4 mb-1 dark:text-gray-100'>
        {{ "balance" | translate }} DFI
      </h3>

      <div class='grid grid-flow-col grid-cols-2 md:gap-2'>
        <span class='grid grid-flow-row auto-rows-max grid-cols-2 lg:grid-cols-3 gap-3 border-b pb-2 col-span-2 mb-2'>
          <div class='text-xl relative'>
            <div class='text-pink-500 font-semibold inline-block overflow-hidden overflow-ellipsis pr-2'>
              {{isIncognitoModeOn ? '****' : getDfiCount() | number: '1.2-2' }}
              <br />
              <div
                class='text-xs text-gray-400 dark:text-gray-300'
              >
                <app-price *ngIf='!isIncognitoModeOn' [fiat]='fiat' [usdPrice]='getDfiValueUsd()'></app-price>
                <div *ngIf='isIncognitoModeOn'>****</div>
              </div>
            </div>
            <div class='inline-block h-full align-middle dark:text-gray-100'>
             {{ 'income.all' | translate }}
            </div>
          </div>
          <div *ngIf="dfiInStaking > 0"  class='text-xl relative'>
            <div class='text-pink-500 font-semibold inline-block overflow-hidden overflow-ellipsis pr-2'>
              {{isIncognitoModeOn ? '****' : dfiInStaking | number: '1.2-2' }}
              <br />
              <div
                class='text-xs text-gray-400 dark:text-gray-300'
              >
                <app-price *ngIf='!isIncognitoModeOn' [fiat]='fiat' [usdPrice]='getStakingValueUsd()'></app-price>
                <div *ngIf='isIncognitoModeOn'>****</div>
              </div>
            </div>
            <div class='inline-block h-full align-middle dark:text-gray-100'>
              Staking
            </div>
          </div>

          <div *ngIf="getDfiCountLM() > 0" class='text-xl relative'>
            <div class='text-pink-500 font-semibold inline-block overflow-hidden overflow-ellipsis pr-2'>
              {{isIncognitoModeOn ? '****' : getDfiCountLM() | number: '1.2-2' }}
              <br />
              <div
                class='text-xs text-gray-400 dark:text-gray-300'
              >
                <app-price *ngIf='!isIncognitoModeOn' [fiat]='fiat' [usdPrice]='getDfiCountLMUsd()'></app-price>
                <div *ngIf='isIncognitoModeOn'>****</div>
              </div>
            </div>
            <div class='inline-block h-full align-middle dark:text-gray-100'>
              LM
            </div>
          </div>

          <div *ngIf="getDfiCountWallet() > 0" class='text-xl relative'>
            <div class='text-pink-500 font-semibold inline-block overflow-hidden overflow-ellipsis pr-2'>
              {{isIncognitoModeOn ? '****' : getDfiCountWallet()| number: '1.2-2' }}
              <br />
              <div
                class='text-xs text-gray-400 dark:text-gray-300'
              >
                <app-price *ngIf='!isIncognitoModeOn' [fiat]='fiat' [usdPrice]='getDfiCountWalletUsd()'></app-price>
                <div *ngIf='isIncognitoModeOn'>****</div>
              </div>
            </div>
            <div class='inline-block h-full align-middle dark:text-gray-100'>
              Wallet
            </div>
          </div>

          <div *ngIf="getCollateralCountVaults('DFI') > 0" class='text-xl relative'>
            <div class='text-pink-500 font-semibold inline-block overflow-hidden overflow-ellipsis pr-2'>
              {{isIncognitoModeOn ? '****' : getCollateralCountVaults('DFI') | number: '1.2-2' }}
              <br />
              <div
                class='text-xs text-gray-400'
              >
                <app-price *ngIf='!isIncognitoModeOn' [fiat]='fiat' [usdPrice]='getDfiInVaultUsd()'></app-price>
                <div *ngIf='isIncognitoModeOn'>****</div>
              </div>
            </div>
            <div class='inline-block h-full align-middle dark:text-gray-100'>
              Vaults
            </div>
          </div>

           <div *ngIf='wallet?.dfiInMasternodes - getFreezerDfiCount() > 0 ' class='text-xl relative'>
            <div class='text-pink-500 font-semibold inline-block overflow-hidden overflow-ellipsis pr-2'>
              {{isIncognitoModeOn ? '****' : wallet?.dfiInMasternodes - getFreezerDfiCount() | number: '1.2-2' }}
              <br />
              <div
                class='text-xs text-gray-400'
              >
                <app-price *ngIf='!isIncognitoModeOn' [fiat]='fiat' [usdPrice]='getMasternodeDfiUsdWithoutFreeezer()'></app-price>
                <div *ngIf='isIncognitoModeOn'>****</div>
              </div>
            </div>
            <div class='inline-block h-full align-middle dark:text-gray-100'>
              Masternodes
            </div>
          </div>



           <div *ngIf='getFreezerDfiCount()> 0' class='text-xl relative'>
            <div class='text-pink-500 font-semibold inline-block overflow-hidden overflow-ellipsis pr-2'>
              {{isIncognitoModeOn ? '****' : getFreezerDfiCount() | number: '1.2-2' }}
              <br />
              <div
                class='text-xs text-gray-400'
              >
                <app-price *ngIf='!isIncognitoModeOn' [fiat]='fiat' [usdPrice]='getFreezerDfiUsd()'></app-price>
                <div *ngIf='isIncognitoModeOn'>****</div>
              </div>
            </div>
            <div class='inline-block h-full align-middle dark:text-gray-100'>
              Freezer
            </div>
          </div>

        </span>
      </div>

      <h3 class='text-lg font-semibold mt-4 mb-1 dark:text-gray-100'>
        {{ "balance" | translate }}  {{ 'income.all' | translate }}
      </h3>

      <div
        class='grid grid-flow-row auto-rows-max grid-cols-2 xl:grid-cols-3 2xl:grid-cols-4 gap-3 border-b pb-2 col-span-2 mb-2'>


        <div *ngFor='let l of getHoldingTokens()' class='text-lg dark:text-gray-100 flex'>
          <div class='inline-block h-full align-middle dark:text-gray-100 pr-3'>
            {{l.name}}
          </div>
          <div class='text-pink-500 font-semibold inline-block overflow-hidden overflow-ellipsis'>
            {{isIncognitoModeOn ? '****' : l.holding | number: '1.5-5'}}
            <div class='text-xs text-gray-400'>
              <app-price *ngIf='!isIncognitoModeOn' [fiat]='fiat' [usdPrice]='l.holdingUsd'></app-price>
              <div *ngIf='isIncognitoModeOn'>*****</div>
            </div>
          </div>
        </div>


      </div>
      <div *ngIf='getAllVaultsFromAllAddresses().length > 0'>
        <h3
          class='text-lg font-semibold mt-4 mb-1 dark:text-gray-100'>
          {{ "balance" | translate }} Vaults (Oracle)
        </h3>

        <div *ngFor='let v of getAllVaultsFromAllAddresses()' class='md:gap-2 border-b'>
          <div class='text-xl relative'>
            <div class='text-pink-500 font-semibold inline-block overflow-hidden overflow-ellipsis pr-2'>
                <span  *ngIf='v.state.toUpperCase() === "IN LIQUIDATION"'>&#10060;</span>
               <span *ngIf='v.state.toUpperCase() !== "IN LIQUIDATION"'>&#9989;</span>
              &nbsp;<a class='text-pink-500 hover:underline'
                   target='_blank'
                   href='https://defiscan.live/vaults/{{v.vaultId}}'>{{isIncognitoModeOn ? '****' : getShortOfId(v.vaultId)}}
                  - {{isIncognitoModeOn ? '****' : v.state}} - Ratio {{isIncognitoModeOn ? '****' : v.collateralRatio}}
                  % - Min {{ isIncognitoModeOn ? '****' : v.loanScheme?.minColRatio}} %
                  - Interest {{ isIncognitoModeOn ? '****' : v.loanScheme?.interestRate}} %</a> &nbsp;
              <span *ngIf='v.state.toUpperCase() === "IN LIQUIDATION"'>&#10060;</span>
              <span *ngIf='v.state.toUpperCase() !== "IN LIQUIDATION"'>&#9989;</span>
              <br />
              <span  *ngIf='getRatioNext(v) < v.collateralRatio'>ðŸ“‰</span>
              <span  *ngIf='getRatioNext(v) >= v.collateralRatio'>ðŸ“ˆ</span>
              &nbsp; <div class='rounded-full bg-pink-500 hover:bg-gray-800 transition-all text-white text-sm px-2 py-1 cursor-pointer inline-block text-center'>
                 Next In {{getBlockToNextOracle()}} ~
                 <span class='text-xl'>{{isIncognitoModeOn ? '****' : getRatioNext(v)}} % </span>
                <div *ngIf='isIncognitoModeOn'>****</div>
              </div>&nbsp;
              <span  *ngIf='getRatioNext(v) < v.collateralRatio'>ðŸ“‰</span>
              <span  *ngIf='getRatioNext(v) >= v.collateralRatio'>ðŸ“ˆ</span>
              <br>
              <div
                class='min-h-7 inline-block rounded-full bg-green-500 hover:bg-green-600 transition-all text-white text-sm px-2 py-1 cursor-pointer'>
                Collateral
                <span class='text-l'><app-price *ngIf='!isIncognitoModeOn' [fiat]='fiat' [usdPrice]='getCollateralFromVaultUsd(v)'></app-price></span>
                -> Next  <span class='text-l'><app-price *ngIf='!isIncognitoModeOn' [fiat]='fiat' [usdPrice]='getNextCollateralFromVaultUsd(v)'></app-price></span> </div>
              <br>
              <div
                class='min-h-7 inline-block rounded-full bg-blue-500 hover:bg-gray-800 transition-all text-white text-sm px-2 py-1 cursor-pointer'>
                Loan
                 <app-price *ngIf='!isIncognitoModeOn' [fiat]='fiat' [usdPrice]='getLoanFromVaultUsd(v)'></app-price> ->
                 Next <app-price *ngIf='!isIncognitoModeOn' [fiat]='fiat' [usdPrice]='getNextLoanFromVaultUsd(v)'></app-price> </div>
                <div *ngIf='isIncognitoModeOn'>****</div>

              </div>
          </div>

        </div>
        <h3
          class='text-lg font-semibold mt-4 mb-1 dark:text-gray-100'>
          Collaterals
        </h3>
        <div
          class='min-h-7 inline-block rounded-full bg-green-500 hover:bg-green-600 transition-all text-white text-xl px-2 py-1 cursor-pointer'>
          <app-price *ngIf='!isIncognitoModeOn' [fiat]='fiat' [usdPrice]='getVaultsCollateralUsd()'></app-price> <span class='text-sm'></span>

        </div>
        <br>

        <div
          class='grid grid-flow-row auto-rows-max grid-cols-2 xl:grid-cols-3 2xl:grid-cols-4 gap-3  pb-2 col-span-2 mb-2'>
          <div class='text-xl relative'>
            <div class='text-pink-500 font-semibold inline-block overflow-hidden overflow-ellipsis pr-2'>
              {{isIncognitoModeOn ? '****' : getCollateralCountVaults('DFI') | number: '1.2-2' }}
              <br />
              <div
                class='text-xs text-gray-400 dark:text-gray-300'
              >
                <app-price *ngIf='!isIncognitoModeOn' [fiat]='fiat'
                           [usdPrice]="getCollateralCountVaults('DFI') * this.poolBtc.priceB"></app-price>
                <div *ngIf='isIncognitoModeOn'>****</div>
              </div>
            </div>
            <div class='inline-block h-full align-middle dark:text-gray-100'>
              DFI
            </div>
          </div>
          <div *ngIf="getCollateralCountVaults('BTC') > 0" class='text-xl relative'>
            <div class='text-pink-500 font-semibold inline-block overflow-hidden overflow-ellipsis pr-2'>
              {{isIncognitoModeOn ? '****' : getCollateralCountVaults('BTC') | number: '1.4-4' }}
              <br />
              <div
                class='text-xs text-gray-400 dark:text-gray-300'
              >
                <app-price *ngIf='!isIncognitoModeOn' [fiat]='fiat'
                           [usdPrice]="getCollateralCountVaults('BTC') * this.poolBtc.priceA"></app-price>
                <div *ngIf='isIncognitoModeOn'>****</div>
              </div>
            </div>
            <div class='inline-block h-full align-middle dark:text-gray-100'>
              BTC
            </div>
          </div>
          <div *ngIf="getCollateralCountVaults('USDC') > 0" class='text-xl relative'>
            <div class='text-pink-500 font-semibold inline-block overflow-hidden overflow-ellipsis pr-2'>
              {{isIncognitoModeOn ? '****' : getCollateralCountVaults('USDC') | number: '1.2-2' }}
              <br />
              <div
                class='text-xs text-gray-400 dark:text-gray-300'
              >
                <app-price *ngIf='!isIncognitoModeOn' [fiat]='fiat'
                           [usdPrice]="getCollateralCountVaults('USDC')"></app-price>
                <div *ngIf='isIncognitoModeOn'>****</div>
              </div>
            </div>
            <div class='inline-block h-full align-middle dark:text-gray-100'>
              USDC
            </div>
          </div>
          <div *ngIf="getCollateralCountVaults('USDT') > 0" class='text-xl relative'>
            <div class='text-pink-500 font-semibold inline-block overflow-hidden overflow-ellipsis pr-2'>
              {{isIncognitoModeOn ? '****' : getCollateralCountVaults('USDT') | number: '1.2-2' }}
              <br />
              <div
                class='text-xs text-gray-400 dark:text-gray-300'
              >
                <app-price *ngIf='!isIncognitoModeOn' [fiat]='fiat'
                           [usdPrice]="getCollateralCountVaults('USDT')"></app-price>
                <div *ngIf='isIncognitoModeOn'>****</div>
              </div>
            </div>
            <div class='inline-block h-full align-middle dark:text-gray-100'>
              USDT
            </div>
          </div>
          <div *ngIf="getCollateralCountVaults('DUSD') > 0" class='text-xl relative'>
            <div class='text-pink-500 font-semibold inline-block overflow-hidden overflow-ellipsis pr-2'>
              {{isIncognitoModeOn ? '****' : getCollateralCountVaults('DUSD') | number: '1.2-2' }}
              <br />
              <div
                class='text-xs text-gray-400 dark:text-gray-300'
              >
                <app-price *ngIf='!isIncognitoModeOn' [fiat]='fiat'
                           [usdPrice]="getCollateralCountVaults('DUSD')"></app-price>
                <div *ngIf='isIncognitoModeOn'>****</div>
              </div>
            </div>
            <div class='inline-block h-full align-middle dark:text-gray-100'>
              DUSD
            </div>
          </div>
        </div>
        <h3
          class='text-lg font-semibold mt-4 mb-1 dark:text-gray-100'>
          Loans
        </h3>
        <div
          class='min-h-7 inline-block rounded-full bg-blue-500 hover:bg-gray-800 transition-all text-white text-xl px-2 py-1 cursor-pointer'>
        <app-price *ngIf='!isIncognitoModeOn' [fiat]='fiat' [usdPrice]='getVaultsLoansValueUsd()'></app-price> <span class='text-sm'></span></div>
        <div *ngIf='isIncognitoModeOn'>****</div>

      </div>
        <div
          class='grid grid-flow-row auto-rows-max grid-cols-2 xl:grid-cols-3 2xl:grid-cols-4 gap-3 pb-2 col-span-2 mb-2'>

            <div *ngFor='let l of getLoanTokens()' class='text-lg dark:text-gray-100 flex'>
              <div class='inline-block h-full align-middle dark:text-gray-100 pr-3'>
                {{l.token}}
              </div>
              <div class='text-pink-500 font-semibold inline-block overflow-hidden overflow-ellipsis'>
                {{isIncognitoModeOn ? '****' : getLoanCountVaults(l.token) | number: '1.5-5'}}
                <div class='text-xs text-gray-400'>
                  <app-price *ngIf='!isIncognitoModeOn' [fiat]='fiat'
                             [usdPrice]="getLoanCountVaults(l.token) "></app-price>
                  <div *ngIf='isIncognitoModeOn'>*****</div>
                </div>
              </div>
          </div>

        </div>
      </div>
    </div>
  </div>


